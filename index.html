<!DOCTYPE html>
<html lang="en" class="dark"> <!-- Default to dark mode for the 'quantum' feel -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schrödinger's Cat: The Quantum Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            /* Smooth transition for theme change */
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* Custom animation for the superposition circle */
        @keyframes pulse-duality {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        .animate-duality {
            animation: pulse-duality 3s infinite ease-in-out;
        }
        
        /* Animation for gentle, slow rotation */
        @keyframes rotate-gentle {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-rotate-slow {
            animation: rotate-gentle 60s linear infinite;
        }

        /* Custom animation for the floating meow (Vertical/Page-wide) */
        @keyframes float-meow {
            0% { transform: translate(-50%, 0); opacity: 0; }
            10% { opacity: 0.8; }
            80% { transform: translate(-50%, -100px); opacity: 0.5; }
            100% { transform: translate(-50%, -150px); opacity: 0; }
        }

        /* Custom animation for horizontal floating text/emojis (Home Tab) */
        @keyframes float-horizontal {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); } /* Use 100vw to ensure it exits the viewport on the right */
        }

        /* Main container for responsiveness */
        .container-main {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Style for the active tab indicator */
        .active-tab {
            position: relative;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 3px;
            background-color: currentColor; /* Matches text color */
            border-radius: 9999px;
            transition: width 0.3s ease;
        }

        /* Content fade transition */
        .tab-content {
            transition: opacity 0.5s ease;
        }
        .opacity-0 {
            opacity: 0;
        }
        .opacity-100 {
            opacity: 1;
        }
        
        /* Style for the Live Timestamp (Monospace/Terminal Look) */
        #live-timestamp {
            font-family: 'Roboto Mono', monospace;
            letter-spacing: 0.05em;
            color: rgb(74 222 128 / var(--tw-text-opacity)); /* Tailwind green-400 equivalent */
            --tw-text-opacity: 0.8;
            font-size: 0.75rem; /* text-xs */
        }
        .dark #live-timestamp {
            color: rgb(253 224 71 / var(--tw-text-opacity)); /* Tailwind yellow-300 equivalent */
        }
        /* Style for the User ID Display */
        #user-id-display {
            font-family: 'Roboto Mono', monospace;
            font-size: 0.75rem; /* text-xs */
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Custom, balanced color palette (Pink and Light Blue)
                        'quantum-light': 'rgb(245, 245, 250)', // Light cream BG
                        'accent-dark': 'rgb(244, 114, 182)', // Vibrant Pink (Dark mode accent)
                        'accent-light': 'rgb(56, 189, 248)',  // Light Blue (Light mode accent)
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-quantum-light text-gray-900 dark:bg-gray-900 dark:text-quantum-light min-h-screen">
    
    <!-- MEOW CONTAINER: Fixed element for floating animation -->
    <div id="meow-container" class="fixed inset-0 pointer-events-none z-50"></div>

    <!-- Application Wrapper -->
    <div id="app" class="container-main p-4 md:p-8">

        <!-- Header and Navigation -->
        <header class="flex flex-col md:flex-row justify-between items-center py-4 md:py-8 border-b border-gray-300 dark:border-gray-700">
            <h1 class="text-3xl font-extrabold text-accent-light dark:text-accent-dark tracking-tighter transition duration-500">
                Schrödinger's Cat
            </h1>
            
            <!-- Navigation Tabs -->
            <nav id="nav-tabs" class="flex flex-wrap justify-center space-x-4 md:space-x-8 mt-4 md:mt-0 text-lg font-medium">
                <!-- Data-tab attribute links to the section ID -->
                <a href="#home" data-tab="home" class="tab-link text-gray-700 dark:text-gray-300 hover:text-accent-light dark:hover:text-accent-dark transition duration-300 pb-2">Home</a>
                <a href="#news" data-tab="news" class="tab-link text-gray-700 dark:text-gray-300 hover:text-accent-light dark:hover:text-accent-dark transition duration-300 pb-2">News</a>
                <a href="#about" data-tab="about" class="tab-link text-gray-700 dark:text-gray-300 hover:text-accent-light dark:hover:text-accent-dark transition duration-300 pb-2">About</a>
                <a href="#contact" data-tab="contact" class="tab-link text-gray-700 dark:text-gray-300 hover:text-accent-light dark:hover:text-accent-dark transition duration-300 pb-2">Contact</a>
                <a href="#more" data-tab="more" class="tab-link text-gray-700 dark:text-gray-300 hover:text-accent-light dark:hover:text-accent-dark transition duration-300 pb-2">More</a>
            </nav>

            <!-- Theme Toggle -->
            <button id="theme-toggle" class="mt-4 md:mt-0 p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:scale-110 transition transform duration-300 shadow-md">
                <!-- Sun Icon (for Dark Mode button state) -->
                <svg id="sun-icon" class="w-6 h-6 text-yellow-500 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                <!-- Moon Icon (for Light Mode button state) -->
                <svg id="moon-icon" class="w-6 h-6 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
            </button>
        </header>

        <!-- Main Content Area -->
        <main id="content-container" class="mt-12">
            
            <!-- HOME Section (Initial view) -->
            <section id="tab-home" class="tab-content opacity-100 relative overflow-hidden">
                <!-- Floating Cats Container - Absolute positioned to cover the section -->
                <div id="floating-cats" class="absolute inset-0 pointer-events-none z-0 overflow-hidden"></div>
                
                <div class="text-center relative z-10"> <!-- z-10 ensures content is above floating elements -->

                    <!-- A/L Exam Countdown Timer -->
                    <div id="al-countdown" class="mb-10 p-4 rounded-xl bg-gray-200/50 dark:bg-gray-800/70 border border-dashed border-accent-light/50 dark:border-accent-dark/50 max-w-lg mx-auto shadow-inner">
                        <p class="text-lg font-bold uppercase tracking-wider mb-2 text-gray-700 dark:text-gray-300">2025 A/L Exam Live Countdown</p>
                        <div id="countdown-display" class="text-3xl font-extrabold text-red-500 dark:text-yellow-400">
                            Loading...
                        </div>
                    </div>
                    <!-- End Countdown Timer -->
                    
                    <!-- Superposition State Animation -->
                    <div class="flex justify-center items-center mb-10">
                        <div class="relative w-64 h-64 md:w-80 md:h-80">
                            <!-- Outer Ring (Slow Rotation) -->
                            <div class="absolute inset-0 rounded-full border-8 border-dashed border-accent-light/50 dark:border-accent-dark/50 animate-rotate-slow"></div>

                            <!-- Inner Core (Pulsing Duality) -->
                            <div class="absolute inset-4 md:inset-6 rounded-full bg-gradient-to-br from-cyan-300/30 to-pink-300/30 dark:from-pink-900/40 dark:to-blue-900/40 flex items-center justify-center animate-duality shadow-xl">
                                <!-- Quantum symbol Psi -->
                                <span class="text-4xl md:text-5xl font-extrabold text-accent-light dark:text-accent-dark">Ψ</span>
                                <!-- Faint question mark for ambiguity -->
                                <span class="absolute text-7xl md:text-9xl opacity-10">?</span>
                            </div>
                            
                            <!-- Superposition Status Text -->
                            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 text-2xl font-bold text-gray-700 dark:text-gray-300">
                                SUPERPOSITION
                            </div>
                        </div>
                    </div>
                    <!-- END NEW ANIMATION -->
                    
                    <!-- Updated text in the box -->
                    <div class="p-6 rounded-xl bg-gray-100 dark:bg-gray-800 shadow-lg max-w-xl mx-auto">
                        <span class="text-5xl" role="img" aria-label="Cat and Skull Emoji">😺 💀</span>
                        <p class="mt-4 text-gray-700 dark:text-gray-400 font-medium">
                            I am both alive and dead.
                        </p>
                    </div>

                </div>
            </section>

            <!-- NEWS Section -->
            <section id="tab-news" class="tab-content hidden opacity-0">
                <h2 class="text-4xl font-bold mb-8 border-b-2 pb-2 border-accent-light dark:border-accent-dark">Latest News</h2>
                <div class="space-y-8">
                    <!-- New Article -->
                    <article class="p-6 rounded-xl bg-white dark:bg-gray-800 shadow-md transition duration-300 hover:shadow-xl">
                        <span class="text-sm font-semibold text-accent-light dark:text-accent-dark uppercase">October 2025</span>
                        <h3 class="text-2xl font-bold my-2">Local Log Implemented</h3>
                        <p class="text-gray-700 dark:text-gray-400">The Contact page now features a **Local Observation Log** powered by your browser's storage. All observations are saved only on your device, simulating the log functionality without requiring a database!</p>
                    </article>
                </div>
            </section>

            <!-- ABOUT Section -->
            <section id="tab-about" class="tab-content hidden opacity-0">
                <h2 class="text-4xl font-bold mb-8 border-b-2 pb-2 border-accent-light dark:border-accent-dark">The Thought Experiment, Explained</h2>
                <div class="prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-400">
                    <p class="text-lg">In 1935, Austrian physicist Erwin Schrödinger devised this thought experiment to illustrate the absurdity of applying the **Copenhagen interpretation** of quantum mechanics to macroscopic objects. He proposed a scenario involving a hypothetical cat that is simultaneously both **alive and dead**, due to its fate being linked to a random subatomic event.</p>
                    
                    <h3 class="text-3xl font-semibold mt-6 mb-4 text-gray-900 dark:text-white">The Setup</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>A sealed steel chamber containing a cat, a vial of poison, a Geiger counter, and a radioactive source.</li>
                        <li>If a single atom decays within one hour, the Geiger counter triggers a hammer, breaking the vial, and releasing the poison.</li>
                        <li>The quantum state of the atom (decayed or not decayed) determines the classical state of the cat (dead or alive).</li>
                    </ul>

                    <h3 class="text-3xl font-semibold mt-6 mb-4 text-gray-900 dark:text-white">The Implication</h3>
                    <p class="text-lg">According to the quantum rules applied literally, until an external observer opens the box, the cat's wave function exists in a superposition of two states: **50% Alive + 50% Dead**. The experiment served as a brilliant critique, forcing physicists to consider where the boundary between the quantum and classical worlds actually lies.</p>
                </div>
            </section>

            <!-- CONTACT Section (Now uses Local Storage Log) -->
            <section id="tab-contact" class="tab-content hidden opacity-0">
                <h2 class="text-4xl font-bold mb-8 border-b-2 pb-2 border-accent-light dark:border-accent-dark">Inquire Within the Box (Local Log)</h2>
                
                <!-- Display User ID -->
                <div class="max-w-xl mx-auto mb-4 p-3 rounded-lg bg-gray-100 dark:bg-gray-800 border border-dashed border-gray-300 dark:border-gray-600">
                    <p class="text-sm text-gray-600 dark:text-gray-400 font-medium">Your Observer ID (Local):</p>
                    <p id="user-id-display" class="break-all text-sm font-bold text-accent-light dark:text-accent-dark mt-1">Generating ID...</p>
                </div>

                <!-- Submission Form -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl max-w-xl mx-auto mb-12">
                    <p class="mb-6 text-gray-600 dark:text-gray-400">
                        Submit your observation below. It will be recorded in your **browser's local storage**. (To save this log collaboratively on a platform like GitHub, a secure backend service would be required.)
                    </p>
                    
                    <form id="observation-form" class="space-y-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Observer Name (Optional)</label>
                            <input type="text" id="name" name="name" class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm p-3 focus:ring-accent-light focus:border-accent-light dark:focus:ring-accent-dark dark:focus:border-accent-dark transition duration-300" placeholder="Heisenberg">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Your Observation / Question</label>
                            <textarea id="message" name="message" rows="4" required class="mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm p-3 focus:ring-accent-light focus:border-accent-light dark:focus:ring-accent-dark dark:focus:border-accent-dark transition duration-300" placeholder="Did I see a flicker?"></textarea>
                        </div>
                        <button type="submit" id="submit-observation" class="w-full py-3 px-4 border border-transparent rounded-lg shadow-lg text-white font-semibold bg-accent-light dark:bg-accent-dark hover:opacity-90 transition duration-300 transform hover:scale-[1.01]">
                            Save Observation to Local Log
                        </button>
                    </form>
                </div>
                
                <!-- Real-Time Log Container -->
                <div class="max-w-xl mx-auto">
                    <h3 class="text-2xl font-bold mb-4 border-b pb-2 text-gray-900 dark:text-white">Observer's Local Log</h3>
                    <div id="realtime-log" class="space-y-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-700 h-[60vh] overflow-y-auto shadow-inner">
                        <p id="loading-message" class="text-center italic text-gray-500 dark:text-gray-400">Loading your saved local observations...</p>
                        <!-- Observations will be rendered here by JavaScript -->
                    </div>
                </div>

            </section>
            
            <!-- MORE Section (FAQ) -->
            <section id="tab-more" class="tab-content hidden opacity-0">
                <h2 class="text-4xl font-bold mb-8 border-b-2 pb-2 border-accent-light dark:border-accent-dark">More Paradoxes and FAQs</h2>
                <div class="space-y-4">
                    <!-- FAQ Item 1 -->
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-lg shadow-md transition duration-300 hover:shadow-xl">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Q: Am I truly a cat, or merely a statistical distribution?</h3>
                        <p class="text-gray-700 dark:text-gray-400">A: While technically a function of probability, for the sake of purring and chasing laser pointers, you may assume the latter. Both states are valid, but only one requires head scratches.</p>
                    </div>
                    <!-- FAQ Item 2 -->
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-lg shadow-md transition duration-300 hover:shadow-xl">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Q: What happens if I use the Many-Worlds Interpretation?</h3>
                        <p class="text-700 dark:text-gray-400">A: In that scenario, you are alive in one universe and dead in another, and both universes are equally real. You just don't have to talk about it with the first one.</p>
                    </div>
                    <!-- FAQ Item 3 -->
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-lg shadow-md transition duration-300 hover:shadow-xl">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Q: Do I get fed?</h3>
                        <p class="text-gray-700 dark:text-gray-400">A: Feeding is a time-dependent, observer-influenced process, subject to the laws of entropy and Schrödinger's lunch schedule. (The answer is yes, sometimes.)</p>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer: Now includes social media icons and the new Live Timestamp -->
        <footer class="mt-16 text-center text-sm text-gray-500 dark:text-gray-600 border-t border-gray-300 dark:border-gray-700 pt-4 pb-8">
            
            <!-- Social Icons Container -->
            <div class="flex justify-center space-x-8 mb-4">
                <!-- YouTube (Brand icon - red) -->
                <a href="https://youtube.com/@ErwinSchrodingerCat" target="_blank" aria-label="YouTube Channel" class="text-3xl text-red-600 dark:text-red-400 hover:scale-125 transition-transform duration-200" title="YouTube">
                    <i class="fab fa-youtube"></i>
                </a>
                <!-- Instagram (Brand icon - uses Pink accent color) -->
                <a href="https://instagram.com/ErwinSchrodingerCat" target="_blank" aria-label="Instagram Profile" class="text-3xl text-pink-500 dark:text-accent-dark hover:scale-125 transition-transform duration-200" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <!-- Telegram (Brand icon - uses Blue accent color) -->
                <a href="https://t.me/ErwinSchrodingerCat" target="_blank" aria-label="Telegram Channel" class="class="text-3xl text-blue-500 dark:text-accent-light hover:scale-125 transition-transform duration-200" title="Telegram">
                    <i class="fab fa-telegram-plane"></i>
                </a>
            </div>

            <!-- Copyright Text -->
            <p>&copy; 2025 Erwin Schrödinger's Cat. Unauthorized observation is discouraged but inevitable.</p>
            <!-- Live Timestamp Placeholder (Using Monospace style) -->
            <p id="live-timestamp" class="mt-1 text-xs italic opacity-80"></p>
        </footer>
    </div>

    <!-- Main JavaScript for Interactivity and Themes -->
    <script type="text/javascript">
        
        // Use crypto.randomUUID for unique IDs, polyfill if necessary
        const generateUUID = () => {
            if (typeof crypto !== 'undefined' && crypto.randomUUID) {
                return crypto.randomUUID();
            }
            // Fallback for older environments
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }
        
        const app = {
            currentTab: 'home',
            userId: null,
            LOCAL_STORAGE_KEY: 'schrodinger_local_log',
            USER_ID_KEY: 'schrodinger_local_user_id',
            
            init: function() {
                this.setupLocalUser();
                this.setupTheme();
                this.setupNavigation();
                this.setupFormHandler(); 
                this.startMeowLoop(); 
                this.initCountdown();
                this.updateLiveTimestamp();
                this.startFloatingCats(); 
                this.renderObservations(this.loadObservations(), document.getElementById('realtime-log')); // Initial load
            },

            // --- LOCAL STORAGE FUNCTIONS (Replaces Firebase) ---
            setupLocalUser: function() {
                // Get or create a unique ID for this local user/browser
                let localId = localStorage.getItem(this.USER_ID_KEY);
                if (!localId) {
                    localId = generateUUID();
                    localStorage.setItem(this.USER_ID_KEY, localId);
                }
                this.userId = 'LocalObserver-' + localId.substring(0, 8); // Shortened for display
                document.getElementById('user-id-display').textContent = this.userId;
            },
            
            loadObservations: function() {
                try {
                    const data = localStorage.getItem(this.LOCAL_STORAGE_KEY);
                    if (data) {
                        // Sort by timestamp descending (newest first)
                        return JSON.parse(data).sort((a, b) => b.timestamp - a.timestamp);
                    }
                } catch (e) {
                    console.error("Error loading observations from local storage:", e);
                }
                return [];
            },
            
            saveObservations: function(observations) {
                try {
                    localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(observations));
                } catch (e) {
                    console.error("Error saving observations to local storage:", e);
                }
            },
            
            // --- SAVE OBSERVATION TO LOCAL STORAGE ---
            simulateSubmission: function(e) {
                e.preventDefault();
                
                const form = e.target;
                const submitButton = document.getElementById('submit-observation');
                const originalText = submitButton.textContent;
                const logContainer = document.getElementById('realtime-log');

                const name = form.elements['name'].value.trim() || 'Anonymous Observer';
                const message = form.elements['message'].value.trim();

                if (!message) return;

                submitButton.disabled = true;
                submitButton.textContent = 'Recording Local Observation...';
                
                // 1. Load existing observations
                let observations = app.loadObservations();
                
                // 2. Add new observation
                const newObservation = {
                    name: name,
                    message: message,
                    timestamp: new Date().getTime(),
                    observerId: app.userId,
                    id: generateUUID()
                };

                observations.unshift(newObservation); // Add to the front for easy sorting (though loadObservations sorts too)

                // 3. Save back to local storage
                app.saveObservations(observations);

                // 4. Update UI
                app.renderObservations(observations, logContainer);
                
                submitButton.textContent = 'Observation Recorded Locally! ᓚᘏᗢ';
                submitButton.classList.remove('bg-accent-light', 'dark:bg-accent-dark');
                submitButton.classList.add('bg-green-500', 'dark:bg-green-700');
                
                form.reset();

                setTimeout(() => {
                    submitButton.textContent = originalText;
                    submitButton.classList.remove('bg-green-500', 'dark:bg-green-700');
                    submitButton.classList.add('bg-accent-light', 'dark:bg-accent-dark');
                    submitButton.disabled = false;
                }, 3000);
            },
            
            // --- RENDER OBSERVATIONS ---
            renderObservations: function(observations, container) {
                if (document.getElementById('loading-message')) {
                    document.getElementById('loading-message').remove();
                }

                if (observations.length === 0) {
                    container.innerHTML = '<p class="text-center italic text-gray-500 dark:text-gray-400 p-4">Be the first to log a local observation!</p>';
                    return;
                }

                container.innerHTML = observations.map(obs => {
                    const date = new Date(obs.timestamp).toLocaleString();
                    // Check if the observer ID matches the current browser's ID
                    const isCurrentUser = obs.observerId === app.userId;
                    const nameDisplay = isCurrentUser 
                        ? `<span class="font-bold text-accent-light dark:text-accent-dark">${obs.name} (You)</span>`
                        : `<span class="font-bold">${obs.name}</span>`;

                    return `
                        <div class="p-4 rounded-lg shadow-sm border ${isCurrentUser ? 'border-accent-light dark:border-accent-dark bg-blue-50 dark:bg-gray-800' : 'border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700'}">
                            <p class="text-sm mb-1">${nameDisplay}</p>
                            <p class="text-gray-900 dark:text-gray-200">${obs.message}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">Logged at ${date} by ${obs.observerId}</p>
                        </div>
                    `;
                }).join('');
            },

            // --- UI FUNCTIONS (Unchanged from previous version) ---
            setupTheme: function() {
                const toggleButton = document.getElementById('theme-toggle');
                const html = document.documentElement;
                const savedTheme = localStorage.getItem('theme');

                if (savedTheme === 'light') {
                    html.classList.remove('dark');
                } else if (savedTheme === 'dark') {
                    html.classList.add('dark');
                } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                     html.classList.add('dark');
                } else {
                     html.classList.remove('dark');
                }

                this.updateThemeIcon();

                toggleButton.addEventListener('click', () => {
                    const isDark = html.classList.toggle('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    this.updateThemeIcon();
                });
            },

            updateThemeIcon: function() {
                const html = document.documentElement;
                const isDark = html.classList.contains('dark');
                document.getElementById('sun-icon').classList.toggle('hidden', !isDark); 
                document.getElementById('moon-icon').classList.toggle('hidden', isDark);
            },
            
            setupNavigation: function() {
                const tabs = document.querySelectorAll('.tab-link');
                const initialTab = window.location.hash.substring(1) || 'home';
                
                this.switchTab(initialTab);

                tabs.forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetTab = e.currentTarget.dataset.tab;
                        this.switchTab(targetTab);
                        history.pushState(null, null, '#' + targetTab);
                    });
                });
            },

            switchTab: function(tabName) {
                this.currentTab = tabName;
                const contents = document.querySelectorAll('.tab-content');
                const links = document.querySelectorAll('.tab-link');

                contents.forEach(content => {
                    const targetId = `tab-${tabName}`;
                    content.classList.add('hidden', 'opacity-0');
                    
                    if (content.id === targetId) {
                        content.classList.remove('hidden');
                        setTimeout(() => content.classList.add('opacity-100'), 10);
                        setTimeout(() => content.classList.remove('opacity-0'), 10);
                    }
                });

                links.forEach(link => {
                    link.classList.remove('active-tab', 'text-accent-light', 'dark:text-accent-dark');
                    link.classList.add('text-gray-700', 'dark:text-gray-300');
                    
                    if (link.dataset.tab === tabName) {
                        link.classList.add('active-tab', 'text-accent-light', 'dark:text-accent-dark');
                        link.classList.remove('text-gray-700', 'dark:text-gray-300');
                    }
                });

                if (tabName === 'home') {
                    this.startFloatingCats();
                } else {
                    const container = document.getElementById('floating-cats');
                    if (container) container.innerHTML = '';
                }
            },
            
            setupFormHandler: function() {
                const form = document.getElementById('observation-form');
                // The form submission is now connected to the local storage save function
                form.addEventListener('submit', this.simulateSubmission);
            },
            
            updateLiveTimestamp: function() {
                const display = document.getElementById('live-timestamp');
                if (!display) return;

                const updateTime = () => {
                    const now = new Date();
                    const formattedTime = now.toLocaleString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        timeZoneName: 'short',
                        hour12: true
                    });
                    display.textContent = `LOCAL QUANTUM FLUX TIME: ${formattedTime}`;
                };

                updateTime();
                setInterval(updateTime, 1000);
            },

            triggerMeow: function() {
                const container = document.getElementById('meow-container');
                const meow = document.createElement('span');
                meow.textContent = 'meow...';
                
                const leftPos = Math.random() * 70 + 15; 
                const fontSize = Math.random() * 1.5 + 1; 
                const duration = Math.random() * 2 + 3; 

                const isDark = document.documentElement.classList.contains('dark');
                const color = isDark ? 'rgb(244, 114, 182)' : 'rgb(56, 189, 248)'; 
                
                meow.style.cssText = `
                    position: absolute;
                    top: 85%;
                    left: ${leftPos}%;
                    font-size: ${fontSize}rem;
                    color: ${color};
                    font-weight: 600;
                    animation: float-meow ${duration}s ease-out forwards;
                    opacity: 0;
                    pointer-events: none;
                    z-index: 1000;
                    user-select: none;
                `;

                container.appendChild(meow);

                setTimeout(() => {
                    meow.remove();
                }, duration * 1000);
            },

            startMeowLoop: function() {
                const scheduleNextMeow = () => {
                    const randomDelay = Math.random() * 6000 + 4000; 
                    setTimeout(() => {
                        this.triggerMeow();
                        scheduleNextMeow();
                    }, randomDelay);
                };
                scheduleNextMeow();
            },

            triggerFloatingElement: function() {
                const container = document.getElementById('floating-cats');
                if (!container) return; 

                const elements = ['🐾', '🐈', 'Purr', 'Meow!', '😺', 'Quantum', 'Collapse'];
                const content = elements[Math.floor(Math.random() * elements.length)];
                
                const element = document.createElement('span');
                element.textContent = content;
                
                const topPos = Math.random() * 80 + 10;
                const fontSize = Math.random() * 1.5 + 1;
                const duration = Math.random() * 5 + 15;

                const isDark = document.documentElement.classList.contains('dark');
                const color = isDark ? 'rgba(244, 114, 182, 0.15)' : 'rgba(56, 189, 248, 0.1)'; 
                
                element.style.cssText = `
                    position: absolute;
                    top: ${topPos}%; 
                    left: 0; 
                    font-size: ${fontSize}rem;
                    color: ${color};
                    font-weight: 700;
                    white-space: nowrap;
                    animation: float-horizontal ${duration}s linear forwards; 
                    pointer-events: none;
                    user-select: none;
                    transform: translateX(-100%);
                `;

                container.appendChild(element);

                setTimeout(() => {
                    element.remove();
                }, duration * 1000);
            },

            startFloatingCats: function() {
                if (this.currentTab !== 'home') return; 

                const scheduleNext = () => {
                    if (this.currentTab !== 'home') {
                        return; 
                    }
                    this.triggerFloatingElement();
                    const randomDelay = Math.random() * 1500 + 1500; 
                    setTimeout(scheduleNext, randomDelay);
                };
                
                scheduleNext();
            },

            initCountdown: function() {
                const targetDate = new Date("2025-11-10T00:00:00").getTime();
                const countdownDisplay = document.getElementById('countdown-display');

                const updateCountdown = () => {
                    const now = new Date().getTime();
                    const distance = targetDate - now;

                    if (distance < 0) {
                        countdownDisplay.innerHTML = "<span class='text-4xl'>EXAM IS LIVE! Good luck. 📚</span>";
                        clearInterval(interval);
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    const formatUnit = (value, unit) => 
                        `${value} <span class="text-sm font-normal text-gray-700 dark:text-gray-300">${unit}</span>`;

                    countdownDisplay.innerHTML = `
                        ${formatUnit(days, 'DAYS')} &middot; 
                        ${formatUnit(hours.toString().padStart(2, '0'), 'HRS')} &middot; 
                        ${formatUnit(minutes.toString().padStart(2, '0'), 'MIN')} &middot; 
                        ${formatUnit(seconds.toString().padStart(2, '0'), 'SEC')}
                    `;
                }

                updateCountdown();
                const interval = setInterval(updateCountdown, 1000);
            }
        };

        window.app = app; 

        // Initialize the app on window load
        window.onload = function() {
            app.init();
        };
    </script>
</body>
</html>
